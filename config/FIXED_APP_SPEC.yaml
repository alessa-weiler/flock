alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
domains:
- domain: example.com
  type: PRIMARY
  zone: example.com
envs:
- key: EMAIL_HOST
  scope: RUN_AND_BUILD_TIME
  value: smtp.gmail.com
- key: EMAIL_PORT
  scope: RUN_AND_BUILD_TIME
  value: "587"
- key: EMAIL_USER
  scope: RUN_AND_BUILD_TIME
  value: your-email@example.com
- key: EMAIL_FROM
  scope: RUN_AND_BUILD_TIME
  value: your-email@example.com
- key: BASE_URL
  scope: RUN_AND_BUILD_TIME
  value: http://localhost:8080
- key: EMAIL_PASSWORD
  scope: RUN_AND_BUILD_TIME
  value: your-email-app-password
- key: ENCRYPTION_PASSWORD
  scope: RUN_AND_BUILD_TIME
  value: your-super-secure-password-change-this
- key: ENCRYPTION_SALT
  scope: RUN_AND_BUILD_TIME
  value: your-unique-salt-change-this
- key: HASH_SALT
  scope: RUN_AND_BUILD_TIME
  value: your-hashing-salt-change-this
- key: DATABASE_ENCRYPTION_KEY
  scope: RUN_AND_BUILD_TIME
  value: your-database-key
- key: ENCRYPTION_MASTER_KEY
  scope: RUN_AND_BUILD_TIME
  value: your-base64-encoded-encryption-key
- key: DATABASE_URL
  scope: RUN_AND_BUILD_TIME
  value: postgresql://username:password@host:port/database?sslmode=require
- key: ADMIN_PASSWORD
  scope: RUN_AND_BUILD_TIME
  value: your-secure-admin-password
- key: VERIFICATION_EMAIL
  scope: RUN_AND_BUILD_TIME
  value: your-email@example.com
- key: STRIPE_PRICE_ID
  scope: RUN_AND_BUILD_TIME
  value: price_your_stripe_price_id
- key: STRIPE_SECRET_KEY
  scope: RUN_AND_BUILD_TIME
  value: sk_live_your_stripe_secret_key
- key: STRIPE_PUBLISHABLE_KEY
  scope: RUN_AND_BUILD_TIME
  value: pk_live_your_stripe_publishable_key
- key: STRIPE_WEBHOOK_SECRET
  scope: RUN_AND_BUILD_TIME
  value: whsec_your_webhook_secret
- key: REDIS_URL
  scope: RUN_AND_BUILD_TIME
  value: redis://default:password@host:port
- key: DO_SPACES_ENDPOINT
  scope: RUN_AND_BUILD_TIME
  value: https://region.digitaloceanspaces.com
- key: DO_SPACES_KEY
  scope: RUN_AND_BUILD_TIME
  value: YOUR_DO_SPACES_KEY
- key: DO_SPACES_SECRET
  scope: RUN_AND_BUILD_TIME
  value: YOUR_DO_SPACES_SECRET
- key: DO_SPACES_REGION
  scope: RUN_AND_BUILD_TIME
  value: your-region
- key: DO_SPACES_BUCKET
  scope: RUN_AND_BUILD_TIME
  value: your-bucket-name
- key: PINECONE_API_KEY
  scope: RUN_AND_BUILD_TIME
  value: pcsk_your_pinecone_api_key
- key: PINECONE_ENVIRONMENT
  scope: RUN_AND_BUILD_TIME
  value: us-east-1
- key: PINECONE_INDEX_NAME
  scope: RUN_AND_BUILD_TIME
  value: your-index-name
- key: OPENAI_API_KEY
  scope: RUN_AND_BUILD_TIME
  value: sk-your-openai-api-key
features:
- buildpack-stack=ubuntu-22
ingress:
  rules:
  - component:
      name: flock
    match:
      authority:
        exact: ""
      path:
        prefix: /
name: your-app-name
region: lon
services:
- environment_slug: python
  github:
    branch: main
    deploy_on_push: true
    repo: your-username/your-repo
  http_port: 8080
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb
  name: flock
  run_command: gunicorn wsgi:application --bind 0.0.0.0:$PORT --timeout 120 --workers 2 --worker-class sync
  source_dir: /
workers:
- environment_slug: python
  github:
    branch: main
    deploy_on_push: true
    repo: your-username/your-repo
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb
  name: worker
  run_command: celery -A tasks worker --loglevel=info --concurrency=2 --max-tasks-per-child=100
  source_dir: /
